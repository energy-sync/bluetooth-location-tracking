<head>
    <link rel="stylesheet" href="./bootstrap.min.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device List</title>
</head>

<template name="main">

    <div class="container text-center text-decoration-underline">
        <br>
        <br>
        <h1>Device Information</h1>
        <br>
    </div>
    <div class="container text-center fw-bold mx-auto">
        <table class="table table-bordered table-striped ">
            <thead class="col text-bg-secondary">
                <th>Name</th>
                <th>Current Location</th>
                <th>Previous Location</th>

            </thead>
            <tbody>
                {{#each device in devices}}

                <tr class="col table-active device-row">

                    <td>{{device.beaconID}}</td>
                    <td>{{device.location}}</td>
                    <td>{{getLastLocation device}}</td>

                </tr>

                {{/each}}
            </tbody>
        </table>
    </div>

    {{#if isMenuOpen}}
        <div class="darkened">
            <div class="container device-menu mx-auto">
                <div class="container">
                    <div class="container modal-header">
                        <h3 class="modal-title" id="deviceModalLabel">Device Information: <strong>{{getDeviceName}}</strong></h3>
                        <button type="button" class="close x-button" id="closeMenu" data-dismiss="modal" aria-label="Close">
                            <span aira-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5>Current location: <strong>{{getCurrentLocation}}</strong></h5>
                        <h5 class="small-header">History</h5>
                        {{#if deviceHasHistory}}
                            <table class="history-table table table-bordered table-striped text-center">
                                <tbody>
                                    {{#each record in getCurrentDeviceHistory}}
                                        <tr class="col table-active device-row">
                                            <td>{{record.location}}</td>
                                            <td>{{getReadableTimestamp record.timestamp}}</td>
                                        </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        {{else}}
                        <p class="gray-text">No history</p>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
    {{/if}}

</template>