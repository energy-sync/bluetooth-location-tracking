<head>
    <title>Patient Head</title>
    <link rel="stylesheet" href="/stylesheets/patient.css">
</head>

<template name="patientInformation">
    <p>Select Department:</p>
    <div class="container-fluid w-50">
        <select class="form-select" name="departments" id="departments">
            <option value="reception">Reception</option>
            <option value="practitioner">General Practitioner</option>
            <option value="lab">Lab</option>
            <option value="dermatology">Dermatology</option>
        </select>
    </div>
    <br>
</template>

<template name="patient">
   <!-- {{> patientInformation}}-->
   <div class = "row">
   <div class="col-3 border border-info border-3 d-none d-xxl-flex" id="patientSidebar">
    {{> patientListSide}}
   </div>
   <div class="col-12 col-xxl-9">
    <h1>Name: {{patient.patientInformation.patientName}}</h1>
    <h2><b>Location:</b> {{patient.location}}</h2>
    <h3><b>Assigned Beacon:</b> {{patient.beaconID}}</h3>
    <select id="beaconIDs">
        {{#each id in ids}}
        <option value="{{id}}">{{id}}</option>
        {{/each}}
        <option value="" selected>Un-Assign Beacon</option>
    </select>
    <button id="assignBtn">Assign Beacon</button>
    <div class="border-bottom border-primary border-2 mt-2"></div>
    <h5>Basic Information:</h5>
    <div class="vstack">
        <table class="table">
            <tr>

                <th class="border border-4 border-primary"><b>Date of Birth:</b> {{patient.patientInformation.DOB}}</th>
                <th class="border border-4 border-primary"><b>Age:</b> {{patient.patientInformation.age}}</th>
                <th class="border border-4 border-primary"><b>Address:</b> {{patient.patientInformation.address}}</th>
            </tr>
            <tr>
                <th class="border border-4 border-primary"><b>Patient ID:</b> {{patient.patientInformation.patientID}}</th>
                <th class="border border-4 border-primary"><b>Assigned Physician:</b> {{patient.patientInformation.physicianName}}</th>
            </tr>
        </table>
    </div>
    {{#if inLab}}
    {{>lab}}
    {{/if}}
    {{#if inDerma}}
    {{>dermatology}}
    {{/if}}
    {{#if inReception}}
    {{>receptionist}}
    {{/if}}
    {{#if inPractitioner}}
    {{>practitioner}}
    {{/if}}
</div>
</div>
</template>

<template name="vitals">
    <h5>Vitals:</h5>
    <div class="vstack">
        <table class="table">
            <tr>
                <th class="border border-4 border-primary"><b>Blood Pressure:</b> {{patient.vitals.bloodPressure}}</th>
                <th class="border border-4 border-primary"><b>Heart Rate:</b> {{patient.vitals.heartRate}}</th>
                <th class="border border-4 border-primary"><b>Height:</b> {{patient.vitals.height}}</th>
                <th class="border border-4 border-primary"><b>Weight:</b> {{patient.vitals.weight}}</th>
            </tr>
        </table>
    </div>
    <br>
</template>

<template name="labWork">
    <h5>Lab Work:</h5>
    <div class="vstack">
        <table class="table">
            <tr>
                <th class="border border-4 border-primary"><b>RBC:</b> {{patient.labWork.RBC}}</th>
                <th class="border border-4 border-primary"><b>Blood Glucose Level:</b> {{patient.labWork.bloodGlucose}}</th>
                <th class="border border-4 border-primary"><b>Hemoglobin:</b> {{patient.labWork.hemoglobin}}</th>
            </tr>
            <tr>
                <th class="border border-4 border-primary"><b>Hematocrit:</b> {{patient.labWork.hematocrit}}</th>
                <th class="border border-4 border-primary"><b>MCV:</b> {{patient.labWork.MCV}}</th>
                <th class="border border-4 border-primary"><b>WBC:</b> {{patient.labWork.WBC}}</th>
            </tr>
            <tr>
                <th class="border border-4 border-primary"><b>Sodium:</b> {{patient.labWork.sodium}}</th>
                <th class="border border-4 border-primary"><b>Potassium:</b> {{patient.labWork.potassium}}</th>
                <th class="border border-4 border-primary"><b>Platelet Count:</b> {{patient.labWork.plateletCount}}</th>
            </tr>
        </table>
    </div>
    <br>
</template>

<template name="prescriptions">
    <h5>Prescriptions:</h5>
    <ul class="list-group">
        {{#each prescription in patient.prescriptions}}
        <li class="list-group-item bg-transparent">{{prescription}}</li>
        {{/each}}
    </ul>
</template>
<template name="dermatology">
    <h5>Dermatology:</h5>
    <div class="vstack">
    <table>
        <tr>
            <th class="border border-4 border-primary"><b>Acne:</b> {{printBool patient.dermatology.acne}}</th>
            <th class="border border-4 border-primary"><b>Acne Scars:</b> {{printBool patient.dermatology.acneScars}}</th>
            <th class="border border-4 border-primary"><b>Eczema and Dermatitis:</b> {{printBool patient.dermatology.eczemaAndDermatitis}}</th>
            <th class="border border-4 border-primary"><b>Hair Loss:</b> {{printBool patient.dermatology.hairLoss}}</th>
        </tr>
        <tr>
            <th class="border border-4 border-primary"><b>Nail Problems:</b> {{printBool patient.dermatology.nailProblems}}</th>
            <th class="border border-4 border-primary"><b>Warts:</b> {{printBool patient.dermatology.warts}}</th>
            <th class="border border-4 border-primary"><b>Fungal Infections:</b> {{printBool patient.dermatology.fungalInfections}}</th>
            <th class="border border-4 border-primary"><b>Skin Cancer:</b> {{printBool patient.dermatology.skinCancer}}</th>
        </tr>
        <tr>
            <th class="border border-4 border-primary"><b>Shingles:</b> {{printBool patient.dermatology.shingles}}</th>
            <th class="border border-4 border-primary"><b>Rosacea:</b> {{printBool patient.dermatology.rosacea}}</th>
            <th class="border border-4 border-primary"><b>Psoriasis:</b> {{printBool patient.dermatology.psoriasis}}</th>
            <th class="border border-4 border-primary"><b>Vitiligo:</b> {{printBool patient.dermatology.vitiligo}}</th>
        </tr>
    </table>
    </div>
    <br>
</template>

<template name="receptionist">

</template>

<template name="practitioner">
    {{> vitals}}
    {{> labWork}}
    {{> prescriptions}}
</template>

<template name="lab">
    {{> vitals}}
    {{> labWork}}
</template>

<template name="patientListSide">
    <div class="container pt-3 title w-100">
        <h1>Patient List</h1>
        <div class="pe-2 gap-1">
            <input type="text" id="search" value={{getSearch}}>
            <button class="btn btn-primary" id="searchButton">Search</button>
        </div>
        <div class="pe-5 gap-1">
        <select name="filterDepartments" id="filterDepartments">
            <option value="allDepartments">All Departments</option>
            <option value="Receptionist">Receptionist</option>
            <option value="General Practitioner">General Practitioner</option>
            <option value="Lab">Lab</option>
            <option value="Dermatology">Dermatology</option>
        </select>
        <select name="filterPhysicians" id="filterPhysicians">
            <option value="allPhysicians">All Physicians</option>
            {{#each physician in physicians}}
                {{> physicianOption physician=physician}}
            {{/each}}
        </select>
        </div>
        <div class="vstack">
            <table class="table table-hover">
                <thead>
                    <th scope="col">Name</th>
                    <th scope="col">Physician Name</th>
                    <th scope="col">Location</th>
                </thead>
                <tbody>
                    {{#each patient in patients}}
                        {{#if isInSearch patient}}
                            {{#if isInDepartment patient}}
                                {{#if hasPhysician patient}}
                                    {{> patientRowSide patient=patient}}
                                {{/if}}    
                            {{/if}}
                        {{/if}}
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="patientRowSide">
    <tr class="patientRowSide">
        <td>{{patient.patientInformation.patientName}}</td>
        <td>{{patient.patientInformation.physicianName}}</td>
        <td class="namecase">{{patient.location}}</td>
    </tr>
</template>

<template name="physicianOption">
    <option value="{{physician}}">{{physician}}</option>
</template>